   1              		.file	"lpc2000_spi.c"
   2              		.text
   3              	.Ltext0:
   4              		.cfi_sections	.debug_frame
   5              		.align	2
   6              		.global	SPISetSpeed
   8              	SPISetSpeed:
   9              	.LFB1:
  10              		.file 1 "../Library/lpcusb/lpc2000_spi.c"
   1:../Library/lpcusb/lpc2000_spi.c **** /*****************************************************************************\
   2:../Library/lpcusb/lpc2000_spi.c **** *              efs - General purpose Embedded Filesystem library              *
   3:../Library/lpcusb/lpc2000_spi.c **** *          --------------------- -----------------------------------          *
   4:../Library/lpcusb/lpc2000_spi.c **** *                                                                             *
   5:../Library/lpcusb/lpc2000_spi.c **** * Filename : lpc2000_spi.c                                                     *
   6:../Library/lpcusb/lpc2000_spi.c **** * Description : This  contains the functions needed to use efs for        *
   7:../Library/lpcusb/lpc2000_spi.c **** *               accessing files on an SD-card connected to an LPC2xxx.        *
   8:../Library/lpcusb/lpc2000_spi.c **** *                                                                             *
   9:../Library/lpcusb/lpc2000_spi.c **** * This library is free software; you can redistribute it and/or               *
  10:../Library/lpcusb/lpc2000_spi.c **** * modify it under the terms of the GNU Lesser General Public                  *
  11:../Library/lpcusb/lpc2000_spi.c **** * License as published by the Free Software Foundation; either                *
  12:../Library/lpcusb/lpc2000_spi.c **** * version 2.1 of the License, or (at your option) any later version.          *
  13:../Library/lpcusb/lpc2000_spi.c **** *                                                                             *
  14:../Library/lpcusb/lpc2000_spi.c **** * This library is distributed in the hope that it will be useful,             *
  15:../Library/lpcusb/lpc2000_spi.c **** * but WITHOUT ANY WARRANTY; without even the implied warranty of              *
  16:../Library/lpcusb/lpc2000_spi.c **** * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU           *
  17:../Library/lpcusb/lpc2000_spi.c **** * Lesser General Public License for more details.                             *
  18:../Library/lpcusb/lpc2000_spi.c **** *                                                                             *
  19:../Library/lpcusb/lpc2000_spi.c **** *                                                    (c)2005 Martin Thomas    *
  20:../Library/lpcusb/lpc2000_spi.c **** *                                                                             *
  21:../Library/lpcusb/lpc2000_spi.c **** \*****************************************************************************/
  22:../Library/lpcusb/lpc2000_spi.c **** 
  23:../Library/lpcusb/lpc2000_spi.c **** /*
  24:../Library/lpcusb/lpc2000_spi.c ****     2006, Bertrik Sikken, modified for LPCUSB
  25:../Library/lpcusb/lpc2000_spi.c **** */
  26:../Library/lpcusb/lpc2000_spi.c **** 
  27:../Library/lpcusb/lpc2000_spi.c **** 
  28:../Library/lpcusb/lpc2000_spi.c **** /*****************************************************************************/
  29:../Library/lpcusb/lpc2000_spi.c **** #include "type.h"
  30:../Library/lpcusb/lpc2000_spi.c **** #include <stdio.h>
  31:../Library/lpcusb/lpc2000_spi.c **** #include "rprintf.h"
  32:../Library/lpcusb/lpc2000_spi.c **** #include "LPC214x.h"
  33:../Library/lpcusb/lpc2000_spi.c **** #include "spi.h"
  34:../Library/lpcusb/lpc2000_spi.c **** /*****************************************************************************/
  35:../Library/lpcusb/lpc2000_spi.c **** 
  36:../Library/lpcusb/lpc2000_spi.c **** // SP0SPCR  Bit-Definitions
  37:../Library/lpcusb/lpc2000_spi.c **** #define CPHA    3
  38:../Library/lpcusb/lpc2000_spi.c **** #define CPOL    4
  39:../Library/lpcusb/lpc2000_spi.c **** #define MSTR    5
  40:../Library/lpcusb/lpc2000_spi.c **** // SP0SPSR  Bit-Definitions
  41:../Library/lpcusb/lpc2000_spi.c **** #define SPIF    7
  42:../Library/lpcusb/lpc2000_spi.c **** 
  43:../Library/lpcusb/lpc2000_spi.c **** /*****************************************************************************/
  44:../Library/lpcusb/lpc2000_spi.c **** 
  45:../Library/lpcusb/lpc2000_spi.c **** /*****************************************************************************/
  46:../Library/lpcusb/lpc2000_spi.c **** 
  47:../Library/lpcusb/lpc2000_spi.c **** // Utility-functions which does not toogle CS.
  48:../Library/lpcusb/lpc2000_spi.c **** // Only needed during card-init. During init
  49:../Library/lpcusb/lpc2000_spi.c **** // the automatic chip-select is disabled for SSP
  50:../Library/lpcusb/lpc2000_spi.c **** 
  51:../Library/lpcusb/lpc2000_spi.c **** static U8 my_SPISend(U8 outgoing)
  52:../Library/lpcusb/lpc2000_spi.c **** {
  53:../Library/lpcusb/lpc2000_spi.c ****     S0SPDR = outgoing;
  54:../Library/lpcusb/lpc2000_spi.c ****     while (!(S0SPSR & (1 << SPIF)));
  55:../Library/lpcusb/lpc2000_spi.c ****     return S0SPDR;
  56:../Library/lpcusb/lpc2000_spi.c **** }
  57:../Library/lpcusb/lpc2000_spi.c **** 
  58:../Library/lpcusb/lpc2000_spi.c **** /*****************************************************************************/
  59:../Library/lpcusb/lpc2000_spi.c **** 
  60:../Library/lpcusb/lpc2000_spi.c **** void SPISetSpeed(U8 speed)
  61:../Library/lpcusb/lpc2000_spi.c **** {
  11              		.loc 1 61 0
  12              		.cfi_startproc
  13              		@ Function supports interworking.
  14              		@ args = 0, pretend = 0, frame = 0
  15              		@ frame_needed = 0, uses_anonymous_args = 0
  16              		@ link register save eliminated.
  17              	.LVL0:
  62:../Library/lpcusb/lpc2000_spi.c ****     speed &= 0xFE;
  18              		.loc 1 62 0
  19 0000 FE0000E2 		and	r0, r0, #254
  20              	.LVL1:
  63:../Library/lpcusb/lpc2000_spi.c ****     if (speed < SPI_PRESCALE_MIN)
  64:../Library/lpcusb/lpc2000_spi.c ****     {
  65:../Library/lpcusb/lpc2000_spi.c ****         speed = SPI_PRESCALE_MIN;
  21              		.loc 1 65 0
  22 0004 070050E3 		cmp	r0, #7
  66:../Library/lpcusb/lpc2000_spi.c ****     }
  67:../Library/lpcusb/lpc2000_spi.c ****     SPI_PRESCALE_REG = speed;
  23              		.loc 1 67 0
  24 0008 08309FE5 		ldr	r3, .L4
  65:../Library/lpcusb/lpc2000_spi.c ****         speed = SPI_PRESCALE_MIN;
  25              		.loc 1 65 0
  26 000c 0800A093 		movls	r0, #8
  27              	.LVL2:
  28              		.loc 1 67 0
  29 0010 0C0083E5 		str	r0, [r3, #12]
  68:../Library/lpcusb/lpc2000_spi.c **** }
  30              		.loc 1 68 0
  31 0014 1EFF2FE1 		bx	lr
  32              	.L5:
  33              		.align	2
  34              	.L4:
  35 0018 000002E0 		.word	-536739840
  36              		.cfi_endproc
  37              	.LFE1:
  39              		.align	2
  40              		.global	SPIInit
  42              	SPIInit:
  43              	.LFB2:
  69:../Library/lpcusb/lpc2000_spi.c **** 
  70:../Library/lpcusb/lpc2000_spi.c **** 
  71:../Library/lpcusb/lpc2000_spi.c **** void SPIInit(void)
  72:../Library/lpcusb/lpc2000_spi.c **** {
  44              		.loc 1 72 0
  45              		.cfi_startproc
  46              		@ Function supports interworking.
  47              		@ args = 0, pretend = 0, frame = 0
  48              		@ frame_needed = 0, uses_anonymous_args = 0
  49 001c 10402DE9 		stmfd	sp!, {r4, lr}
  50              	.LCFI0:
  51              		.cfi_def_cfa_offset 8
  52              		.cfi_offset 14, -4
  53              		.cfi_offset 4, -8
  73:../Library/lpcusb/lpc2000_spi.c ****     U8 i;
  74:../Library/lpcusb/lpc2000_spi.c ****     //U32 j;
  75:../Library/lpcusb/lpc2000_spi.c **** 
  76:../Library/lpcusb/lpc2000_spi.c ****     rprintf("spiInit for SPI(0)\n");
  54              		.loc 1 76 0
  55 0020 A0009FE5 		ldr	r0, .L11
  56 0024 FEFFFFEB 		bl	rprintf
  77:../Library/lpcusb/lpc2000_spi.c **** 
  78:../Library/lpcusb/lpc2000_spi.c ****     // setup GPIO
  79:../Library/lpcusb/lpc2000_spi.c ****     PINSEL2 = 0;
  57              		.loc 1 79 0
  58 0028 9C209FE5 		ldr	r2, .L11+4
  59 002c 0030A0E3 		mov	r3, #0
  60 0030 143082E5 		str	r3, [r2, #20]
  80:../Library/lpcusb/lpc2000_spi.c **** 
  81:../Library/lpcusb/lpc2000_spi.c **** 	SPI_IODIR |= (1 << SPI_SCK_PIN) | (1 << SPI_MOSI_PIN);
  61              		.loc 1 81 0
  62 0034 94309FE5 		ldr	r3, .L11+8
  63 0038 081093E5 		ldr	r1, [r3, #8]
  64 003c 501081E3 		orr	r1, r1, #80
  65 0040 081083E5 		str	r1, [r3, #8]
  82:../Library/lpcusb/lpc2000_spi.c ****     SPI_SS_IODIR |= (1 << SPI_SS_PIN);
  66              		.loc 1 82 0
  67 0044 081093E5 		ldr	r1, [r3, #8]
  68 0048 801081E3 		orr	r1, r1, #128
  69 004c 081083E5 		str	r1, [r3, #8]
  83:../Library/lpcusb/lpc2000_spi.c ****     SPI_IODIR &= ~(1 << SPI_MISO_PIN);
  70              		.loc 1 83 0
  71 0050 081093E5 		ldr	r1, [r3, #8]
  72 0054 2010C1E3 		bic	r1, r1, #32
  73 0058 081083E5 		str	r1, [r3, #8]
  84:../Library/lpcusb/lpc2000_spi.c **** 
  85:../Library/lpcusb/lpc2000_spi.c ****     // reset Pin-Functions
  86:../Library/lpcusb/lpc2000_spi.c ****     SPI_PINSEL &= ~((3 << SPI_SCK_FUNCBIT) | (3 << SPI_MISO_FUNCBIT) | (3 << SPI_MOSI_FUNCBIT));
  74              		.loc 1 86 0
  75 005c 001092E5 		ldr	r1, [r2, #0]
  76 0060 3F1CC1E3 		bic	r1, r1, #16128
  77 0064 001082E5 		str	r1, [r2, #0]
  87:../Library/lpcusb/lpc2000_spi.c ****     SPI_PINSEL |= ((1 << SPI_SCK_FUNCBIT) | (1 << SPI_MISO_FUNCBIT) | (1 << SPI_MOSI_FUNCBIT));
  78              		.loc 1 87 0
  79 0068 001092E5 		ldr	r1, [r2, #0]
  80 006c 151C81E3 		orr	r1, r1, #5376
  81 0070 001082E5 		str	r1, [r2, #0]
  88:../Library/lpcusb/lpc2000_spi.c **** 
  89:../Library/lpcusb/lpc2000_spi.c ****     // set Chip-Select high - unselect card
  90:../Library/lpcusb/lpc2000_spi.c ****     UNSELECT_CARD();
  82              		.loc 1 90 0
  83 0074 042093E5 		ldr	r2, [r3, #4]
  91:../Library/lpcusb/lpc2000_spi.c **** 
  92:../Library/lpcusb/lpc2000_spi.c ****     // enable SPI-Master
  93:../Library/lpcusb/lpc2000_spi.c ****     S0SPCR = (1 << MSTR) | (0 << CPOL);   // TODO: check CPOL
  84              		.loc 1 93 0
  85 0078 54409FE5 		ldr	r4, .L11+12
  90:../Library/lpcusb/lpc2000_spi.c ****     UNSELECT_CARD();
  86              		.loc 1 90 0
  87 007c 802082E3 		orr	r2, r2, #128
  88 0080 042083E5 		str	r2, [r3, #4]
  89              		.loc 1 93 0
  90 0084 2030A0E3 		mov	r3, #32
  91 0088 003084E5 		str	r3, [r4, #0]
  94:../Library/lpcusb/lpc2000_spi.c **** 
  95:../Library/lpcusb/lpc2000_spi.c ****     // low speed during init
  96:../Library/lpcusb/lpc2000_spi.c ****     SPISetSpeed(254);
  92              		.loc 1 96 0
  93 008c FE00A0E3 		mov	r0, #254
  94 0090 FEFFFFEB 		bl	SPISetSpeed
  95              	.LVL3:
  96 0094 1520A0E3 		mov	r2, #21
  97              	.LBB4:
  98              	.LBB5:
  53:../Library/lpcusb/lpc2000_spi.c ****     S0SPDR = outgoing;
  99              		.loc 1 53 0
 100 0098 FF10A0E3 		mov	r1, #255
 101 009c 0430A0E1 		mov	r3, r4
 102              	.LVL4:
 103              	.L8:
 104 00a0 081084E5 		str	r1, [r4, #8]
 105              	.L7:
  54:../Library/lpcusb/lpc2000_spi.c ****     while (!(S0SPSR & (1 << SPIF)));
 106              		.loc 1 54 0
 107 00a4 040093E5 		ldr	r0, [r3, #4]
 108 00a8 800010E3 		tst	r0, #128
 109 00ac FCFFFF0A 		beq	.L7
  55:../Library/lpcusb/lpc2000_spi.c ****     return S0SPDR;
 110              		.loc 1 55 0
 111 00b0 012042E2 		sub	r2, r2, #1
 112              	.LBE5:
 113              	.LBE4:
  97:../Library/lpcusb/lpc2000_spi.c **** 
  98:../Library/lpcusb/lpc2000_spi.c ****     /* Send 20 spi commands with card not selected */
  99:../Library/lpcusb/lpc2000_spi.c ****     for (i = 0; i < 21; i++)
 114              		.loc 1 99 0
 115 00b4 FF2012E2 		ands	r2, r2, #255
 116              	.LBB7:
 117              	.LBB6:
  55:../Library/lpcusb/lpc2000_spi.c ****     return S0SPDR;
 118              		.loc 1 55 0
 119 00b8 080093E5 		ldr	r0, [r3, #8]
 120              	.LBE6:
 121              	.LBE7:
 122              		.loc 1 99 0
 123 00bc F7FFFF1A 		bne	.L8
 100:../Library/lpcusb/lpc2000_spi.c ****     {
 101:../Library/lpcusb/lpc2000_spi.c ****         my_SPISend(0xff);
 102:../Library/lpcusb/lpc2000_spi.c ****     }
 103:../Library/lpcusb/lpc2000_spi.c **** }
 124              		.loc 1 103 0
 125 00c0 1040BDE8 		ldmfd	sp!, {r4, lr}
 126 00c4 1EFF2FE1 		bx	lr
 127              	.L12:
 128              		.align	2
 129              	.L11:
 130 00c8 00000000 		.word	.LC0
 131 00cc 00C002E0 		.word	-536690688
 132 00d0 008002E0 		.word	-536707072
 133 00d4 000002E0 		.word	-536739840
 134              		.cfi_endproc
 135              	.LFE2:
 137              		.align	2
 138              		.global	SPISend
 140              	SPISend:
 141              	.LFB3:
 104:../Library/lpcusb/lpc2000_spi.c **** 
 105:../Library/lpcusb/lpc2000_spi.c **** /*****************************************************************************/
 106:../Library/lpcusb/lpc2000_spi.c **** 
 107:../Library/lpcusb/lpc2000_spi.c **** /*****************************************************************************/
 108:../Library/lpcusb/lpc2000_spi.c **** 
 109:../Library/lpcusb/lpc2000_spi.c **** U8 SPISend(U8 outgoing)
 110:../Library/lpcusb/lpc2000_spi.c **** {
 142              		.loc 1 110 0
 143              		.cfi_startproc
 144              		@ Function supports interworking.
 145              		@ args = 0, pretend = 0, frame = 0
 146              		@ frame_needed = 0, uses_anonymous_args = 0
 147              		@ link register save eliminated.
 148              	.LVL5:
 111:../Library/lpcusb/lpc2000_spi.c ****     U8 incoming;
 112:../Library/lpcusb/lpc2000_spi.c **** 
 113:../Library/lpcusb/lpc2000_spi.c ****     SELECT_CARD();
 149              		.loc 1 113 0
 150 00d8 3C309FE5 		ldr	r3, .L16
 151 00dc 0C2093E5 		ldr	r2, [r3, #12]
 152 00e0 802082E3 		orr	r2, r2, #128
 153 00e4 0C2083E5 		str	r2, [r3, #12]
 114:../Library/lpcusb/lpc2000_spi.c ****     S0SPDR = outgoing;
 154              		.loc 1 114 0
 155 00e8 30209FE5 		ldr	r2, .L16+4
 110:../Library/lpcusb/lpc2000_spi.c **** {
 156              		.loc 1 110 0
 157 00ec FF0000E2 		and	r0, r0, #255
 158              	.LVL6:
 159              		.loc 1 114 0
 160 00f0 080082E5 		str	r0, [r2, #8]
 161              	.L14:
 115:../Library/lpcusb/lpc2000_spi.c ****     while (!(S0SPSR & (1 << SPIF)));
 162              		.loc 1 115 0 discriminator 1
 163 00f4 041092E5 		ldr	r1, [r2, #4]
 164 00f8 800011E3 		tst	r1, #128
 165 00fc FCFFFF0A 		beq	.L14
 116:../Library/lpcusb/lpc2000_spi.c ****     incoming = S0SPDR;
 166              		.loc 1 116 0
 167 0100 18209FE5 		ldr	r2, .L16+4
 168 0104 080092E5 		ldr	r0, [r2, #8]
 169              	.LVL7:
 117:../Library/lpcusb/lpc2000_spi.c ****     UNSELECT_CARD();
 170              		.loc 1 117 0
 171 0108 042093E5 		ldr	r2, [r3, #4]
 172 010c 802082E3 		orr	r2, r2, #128
 173 0110 042083E5 		str	r2, [r3, #4]
 118:../Library/lpcusb/lpc2000_spi.c **** 
 119:../Library/lpcusb/lpc2000_spi.c ****     return incoming;
 174              		.loc 1 119 0
 175 0114 FF0000E2 		and	r0, r0, #255
 176              	.LVL8:
 120:../Library/lpcusb/lpc2000_spi.c **** }
 177              		.loc 1 120 0
 178 0118 1EFF2FE1 		bx	lr
 179              	.L17:
 180              		.align	2
 181              	.L16:
 182 011c 008002E0 		.word	-536707072
 183 0120 000002E0 		.word	-536739840
 184              		.cfi_endproc
 185              	.LFE3:
 187              		.align	2
 188              		.global	SPISendN
 190              	SPISendN:
 191              	.LFB4:
 121:../Library/lpcusb/lpc2000_spi.c **** 
 122:../Library/lpcusb/lpc2000_spi.c **** void SPISendN(U8 * pbBuf, int iLen)
 123:../Library/lpcusb/lpc2000_spi.c **** {
 192              		.loc 1 123 0
 193              		.cfi_startproc
 194              		@ Function supports interworking.
 195              		@ args = 0, pretend = 0, frame = 0
 196              		@ frame_needed = 0, uses_anonymous_args = 0
 197              		@ link register save eliminated.
 198              	.LVL9:
 124:../Library/lpcusb/lpc2000_spi.c ****     int i;
 125:../Library/lpcusb/lpc2000_spi.c **** 
 126:../Library/lpcusb/lpc2000_spi.c ****     SELECT_CARD();
 199              		.loc 1 126 0
 200 0124 54309FE5 		ldr	r3, .L23
 201 0128 0C2093E5 		ldr	r2, [r3, #12]
 202 012c 802082E3 		orr	r2, r2, #128
 123:../Library/lpcusb/lpc2000_spi.c **** {
 203              		.loc 1 123 0
 204 0130 04402DE5 		str	r4, [sp, #-4]!
 205              	.LCFI1:
 206              		.cfi_def_cfa_offset 4
 207              		.cfi_offset 4, -4
 208              		.loc 1 126 0
 209 0134 0C2083E5 		str	r2, [r3, #12]
 210              	.LVL10:
 127:../Library/lpcusb/lpc2000_spi.c ****     for (i = 0; i < iLen; i++)
 128:../Library/lpcusb/lpc2000_spi.c ****     {
 129:../Library/lpcusb/lpc2000_spi.c ****         S0SPDR = pbBuf[i];
 211              		.loc 1 129 0
 212 0138 44209FE5 		ldr	r2, .L23+4
 127:../Library/lpcusb/lpc2000_spi.c ****     for (i = 0; i < iLen; i++)
 213              		.loc 1 127 0
 214 013c 0030A0E3 		mov	r3, #0
 215 0140 02C0A0E1 		mov	ip, r2
 216 0144 050000EA 		b	.L19
 217              	.LVL11:
 218              	.L21:
 219              		.loc 1 129 0
 220 0148 0340D0E7 		ldrb	r4, [r0, r3]	@ zero_extendqisi2
 221 014c 084082E5 		str	r4, [r2, #8]
 222              	.L20:
 130:../Library/lpcusb/lpc2000_spi.c ****         while (!(S0SPSR & (1 << SPIF)));
 223              		.loc 1 130 0 discriminator 1
 224 0150 04409CE5 		ldr	r4, [ip, #4]
 225 0154 800014E3 		tst	r4, #128
 226 0158 FCFFFF0A 		beq	.L20
 127:../Library/lpcusb/lpc2000_spi.c ****     for (i = 0; i < iLen; i++)
 227              		.loc 1 127 0
 228 015c 013083E2 		add	r3, r3, #1
 229              	.LVL12:
 230              	.L19:
 127:../Library/lpcusb/lpc2000_spi.c ****     for (i = 0; i < iLen; i++)
 231              		.loc 1 127 0 is_stmt 0 discriminator 1
 232 0160 010053E1 		cmp	r3, r1
 233 0164 F7FFFFBA 		blt	.L21
 131:../Library/lpcusb/lpc2000_spi.c ****     }
 132:../Library/lpcusb/lpc2000_spi.c ****     UNSELECT_CARD();
 234              		.loc 1 132 0 is_stmt 1
 235 0168 10309FE5 		ldr	r3, .L23
 236              	.LVL13:
 237 016c 042093E5 		ldr	r2, [r3, #4]
 238 0170 802082E3 		orr	r2, r2, #128
 239 0174 042083E5 		str	r2, [r3, #4]
 133:../Library/lpcusb/lpc2000_spi.c **** }
 240              		.loc 1 133 0
 241 0178 1000BDE8 		ldmfd	sp!, {r4}
 242 017c 1EFF2FE1 		bx	lr
 243              	.L24:
 244              		.align	2
 245              	.L23:
 246 0180 008002E0 		.word	-536707072
 247 0184 000002E0 		.word	-536739840
 248              		.cfi_endproc
 249              	.LFE4:
 251              		.align	2
 252              		.global	SPIRecvN
 254              	SPIRecvN:
 255              	.LFB5:
 134:../Library/lpcusb/lpc2000_spi.c **** 
 135:../Library/lpcusb/lpc2000_spi.c **** void SPIRecvN(U8 * pbBuf, int iLen)
 136:../Library/lpcusb/lpc2000_spi.c **** {
 256              		.loc 1 136 0
 257              		.cfi_startproc
 258              		@ Function supports interworking.
 259              		@ args = 0, pretend = 0, frame = 0
 260              		@ frame_needed = 0, uses_anonymous_args = 0
 261              		@ link register save eliminated.
 262              	.LVL14:
 137:../Library/lpcusb/lpc2000_spi.c ****     int i;
 138:../Library/lpcusb/lpc2000_spi.c **** 
 139:../Library/lpcusb/lpc2000_spi.c ****     SELECT_CARD();
 263              		.loc 1 139 0
 264 0188 5C309FE5 		ldr	r3, .L30
 265 018c 0C2093E5 		ldr	r2, [r3, #12]
 140:../Library/lpcusb/lpc2000_spi.c ****     for (i = 0; i < iLen; i++)
 141:../Library/lpcusb/lpc2000_spi.c ****     {
 142:../Library/lpcusb/lpc2000_spi.c ****         S0SPDR = 0xFF;
 266              		.loc 1 142 0
 267 0190 58C09FE5 		ldr	ip, .L30+4
 139:../Library/lpcusb/lpc2000_spi.c ****     SELECT_CARD();
 268              		.loc 1 139 0
 269 0194 802082E3 		orr	r2, r2, #128
 136:../Library/lpcusb/lpc2000_spi.c **** {
 270              		.loc 1 136 0
 271 0198 30002DE9 		stmfd	sp!, {r4, r5}
 272              	.LCFI2:
 273              		.cfi_def_cfa_offset 8
 274              		.cfi_offset 5, -4
 275              		.cfi_offset 4, -8
 139:../Library/lpcusb/lpc2000_spi.c ****     SELECT_CARD();
 276              		.loc 1 139 0
 277 019c 0C2083E5 		str	r2, [r3, #12]
 278              	.LVL15:
 279              		.loc 1 142 0
 280 01a0 FF40A0E3 		mov	r4, #255
 140:../Library/lpcusb/lpc2000_spi.c ****     for (i = 0; i < iLen; i++)
 281              		.loc 1 140 0
 282 01a4 0030A0E3 		mov	r3, #0
 283 01a8 0C20A0E1 		mov	r2, ip
 284 01ac 060000EA 		b	.L26
 285              	.LVL16:
 286              	.L28:
 287              		.loc 1 142 0
 288 01b0 08408CE5 		str	r4, [ip, #8]
 289              	.L27:
 143:../Library/lpcusb/lpc2000_spi.c ****         while (!(S0SPSR & (1 << SPIF)));
 290              		.loc 1 143 0 discriminator 1
 291 01b4 045092E5 		ldr	r5, [r2, #4]
 292 01b8 800015E3 		tst	r5, #128
 293 01bc FCFFFF0A 		beq	.L27
 144:../Library/lpcusb/lpc2000_spi.c ****         pbBuf[i] = S0SPDR;
 294              		.loc 1 144 0
 295 01c0 085092E5 		ldr	r5, [r2, #8]
 296 01c4 0350C0E7 		strb	r5, [r0, r3]
 140:../Library/lpcusb/lpc2000_spi.c ****     for (i = 0; i < iLen; i++)
 297              		.loc 1 140 0
 298 01c8 013083E2 		add	r3, r3, #1
 299              	.LVL17:
 300              	.L26:
 140:../Library/lpcusb/lpc2000_spi.c ****     for (i = 0; i < iLen; i++)
 301              		.loc 1 140 0 is_stmt 0 discriminator 1
 302 01cc 010053E1 		cmp	r3, r1
 303 01d0 F6FFFFBA 		blt	.L28
 145:../Library/lpcusb/lpc2000_spi.c ****     }
 146:../Library/lpcusb/lpc2000_spi.c ****     UNSELECT_CARD();
 304              		.loc 1 146 0 is_stmt 1
 305 01d4 10309FE5 		ldr	r3, .L30
 306              	.LVL18:
 307 01d8 042093E5 		ldr	r2, [r3, #4]
 308 01dc 802082E3 		orr	r2, r2, #128
 309 01e0 042083E5 		str	r2, [r3, #4]
 147:../Library/lpcusb/lpc2000_spi.c **** }
 310              		.loc 1 147 0
 311 01e4 3000BDE8 		ldmfd	sp!, {r4, r5}
 312 01e8 1EFF2FE1 		bx	lr
 313              	.L31:
 314              		.align	2
 315              	.L30:
 316 01ec 008002E0 		.word	-536707072
 317 01f0 000002E0 		.word	-536739840
 318              		.cfi_endproc
 319              	.LFE5:
 321              		.section	.rodata.str1.1,"aMS",%progbits,1
 322              	.LC0:
 323 0000 73706949 		.ascii	"spiInit for SPI(0)\012\000"
 323      6E697420 
 323      666F7220 
 323      53504928 
 323      30290A00 
 324              		.text
 325              	.Letext0:
 326              		.file 2 "../Library/lpcusb/type.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 lpc2000_spi.c
/var/folders/vb/2fcwf0x52qn_fy1j7_hx1lpr0000gn/T//ccW6IVdw.s:5      .text:0000000000000000 $a
/var/folders/vb/2fcwf0x52qn_fy1j7_hx1lpr0000gn/T//ccW6IVdw.s:8      .text:0000000000000000 SPISetSpeed
/var/folders/vb/2fcwf0x52qn_fy1j7_hx1lpr0000gn/T//ccW6IVdw.s:35     .text:0000000000000018 $d
/var/folders/vb/2fcwf0x52qn_fy1j7_hx1lpr0000gn/T//ccW6IVdw.s:39     .text:000000000000001c $a
/var/folders/vb/2fcwf0x52qn_fy1j7_hx1lpr0000gn/T//ccW6IVdw.s:42     .text:000000000000001c SPIInit
/var/folders/vb/2fcwf0x52qn_fy1j7_hx1lpr0000gn/T//ccW6IVdw.s:130    .text:00000000000000c8 $d
/var/folders/vb/2fcwf0x52qn_fy1j7_hx1lpr0000gn/T//ccW6IVdw.s:137    .text:00000000000000d8 $a
/var/folders/vb/2fcwf0x52qn_fy1j7_hx1lpr0000gn/T//ccW6IVdw.s:140    .text:00000000000000d8 SPISend
/var/folders/vb/2fcwf0x52qn_fy1j7_hx1lpr0000gn/T//ccW6IVdw.s:182    .text:000000000000011c $d
/var/folders/vb/2fcwf0x52qn_fy1j7_hx1lpr0000gn/T//ccW6IVdw.s:187    .text:0000000000000124 $a
/var/folders/vb/2fcwf0x52qn_fy1j7_hx1lpr0000gn/T//ccW6IVdw.s:190    .text:0000000000000124 SPISendN
/var/folders/vb/2fcwf0x52qn_fy1j7_hx1lpr0000gn/T//ccW6IVdw.s:246    .text:0000000000000180 $d
/var/folders/vb/2fcwf0x52qn_fy1j7_hx1lpr0000gn/T//ccW6IVdw.s:251    .text:0000000000000188 $a
/var/folders/vb/2fcwf0x52qn_fy1j7_hx1lpr0000gn/T//ccW6IVdw.s:254    .text:0000000000000188 SPIRecvN
/var/folders/vb/2fcwf0x52qn_fy1j7_hx1lpr0000gn/T//ccW6IVdw.s:316    .text:00000000000001ec $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
rprintf
